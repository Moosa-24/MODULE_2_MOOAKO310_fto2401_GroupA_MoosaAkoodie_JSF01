<div x-data="filterData()" x-init="fetchCategories()">
    <select x-model="selectedCategory" @change="filterProducts()">
      <option value="">Select Category</option>
      <template x-for="category in categories" :key="category">
        <option :value="category" x-text="category"></option>
      </template>
    </select>
  
    <script>
      function filterData() {
        return {
          categories: [],
          selectedCategory: '',
          async fetchCategories() {
            const response = await fetch('https://fakestoreapi.com/products/categories');
            this.categories = await response.json();
          },
          filterProducts() {
            document.dispatchEvent(new CustomEvent('categoryChanged', { detail: this.selectedCategory }));
          }
        }
      }
    </script>
  </div>
  